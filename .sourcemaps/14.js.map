{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { LoginPage } from './login';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LoginPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(LoginPage),\r\n  ],\r\n  exports:[LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import {Component} from '@angular/core';\r\nimport {NavController, IonicPage, ToastController} from 'ionic-angular';\r\nimport { Facebook, FacebookLoginResponse } from '@ionic-native/facebook';\r\nimport { Http, RequestOptions } from '@angular/http';\r\nimport { AlertController } from 'ionic-angular/components/alert/alert-controller';\r\nimport { HTTP } from '@ionic-native/http'\r\nimport { Headers } from '@angular/http';\r\n\r\n/*\r\n Generated class for the LoginPage page.\r\n\r\n See http://ionicframework.com/docs/v2/components/#navigation for more info on\r\n Ionic pages and navigation.\r\n */\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-login',\r\n  templateUrl: 'login.html'\r\n})\r\nexport class LoginPage {\r\n  userData: any;\r\n  constructor( public nav: NavController, public toast: ToastController, private facebook: Facebook, private http: Http, public hp : HTTP, public alert: AlertController) {}\r\n  // go to forgot password page\r\n  forgotPwd() {\r\n    this.nav.push('ForgotPasswordPage');\r\n  }\r\n\r\n  user: any = {\r\n    \"username\": \"\",\r\n    \"password\": \"\"\r\n  }\r\n  login_via_email() {\r\n    let headers = new Headers( { 'Content-Type': 'application/json' } );\r\n    let options = new RequestOptions( { withCredentials: true , headers: headers } );\r\n    this.user = {\r\n      username: this.user.email,\r\n      password: this.user.password\r\n    }\r\n\r\n    this.http.post('http://localhost:3000/users/auth', this.user,options).subscribe(res => {\r\n      localStorage.removeItem('user');\r\n\r\n      if(res.json().id != null)\r\n      {\r\n        localStorage.setItem('user', JSON.stringify(res.json()))\r\n        \r\n        this.nav.setRoot('MainTabsPage')\r\n      }\r\n      else{\r\n        let errConfig = {  \r\n        message: 'Error loging in',\r\n        duration: 3000,\r\n        position: 'top'\r\n      };\r\n        let t = this.toast.create(errConfig);\r\n        t.present();\r\n      }\r\n    }, err => {\r\n      let errConfig = {  \r\n        message: 'Error loging in',\r\n        duration: 3000,\r\n        position: 'top'\r\n      };\r\n        let t = this.toast.create(errConfig);\r\n        t.present();\r\n\r\n    })\r\n  } \r\n  // process login\r\n  fblogin ()\r\n  {\r\n\r\n    let permission_set = ['email',\r\n    'public_profile',\r\n    'read_custom_friendlists',\r\n    'user_about_me',\r\n    'user_birthday',\r\n    'user_education_history',\r\n    'user_friends',\r\n    'user_hometown',\r\n    'user_location',\r\n    'user_relationship_details',\r\n    'user_relationships',\r\n    'user_religion_politics',\r\n    'user_work_history',\r\n    'user_actions.books',\r\n    'user_actions.fitness',\r\n    'user_actions.music',\r\n    'user_actions.news',\r\n    'user_actions.video',\r\n    'user_games_activity',\r\n    'user_likes',\r\n    'user_photos',\r\n    'user_posts',\r\n    'user_tagged_places',\r\n    'user_videos',\r\n    'user_website']\r\n\r\n\r\n\r\n    this.facebook.login( permission_set )\r\n      .then( ( response: FacebookLoginResponse ) =>\r\n    {\r\n      this.facebook.api( 'me?fields=id,name,email,address,friends,location,first_name,picture.width(720).height(720).as(picture_large)', [] ).then( profile =>\r\n      {\r\n        this.userData = { locations: profile['location'], email: profile['email'], first_name: profile['first_name'], picture: profile['picture_large']['data']['url'], username: profile['name'], address: profile['address'], friends: profile['friends'] }\r\n        console.log(JSON.stringify(this.userData));\r\n        console.log(this.userData);\r\n        \r\n        \r\n\r\n\r\n      } );\r\n    } );\r\n  }\r\n\r\n  // go to sign up page\r\n  signUp() {\r\n    // add our sign up code here\r\n    this.nav.push('SignUpPage');\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}