{"version":3,"sources":["../../src/pages/place-detail/place-detail.module.ts","../../src/pages/place-detail/place-detail.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { PlaceDetailPage } from './place-detail';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PlaceDetailPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(PlaceDetailPage),\r\n  ],\r\n  exports:[PlaceDetailPage]\r\n})\r\nexport class PlaceDetailPageModule{}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/place-detail/place-detail.module.ts","import {Component} from '@angular/core';\r\nimport {NavController, IonicPage} from 'ionic-angular';\r\nimport {PlaceService} from '../../services/place-service';\r\n\r\nimport { NavParams } from 'ionic-angular/navigation/nav-params';\r\nimport { Http, RequestOptions, Headers } from '@angular/http';\r\n\r\n\r\n/*\r\n Generated class for the LoginPage page.\r\n\r\n See http://ionicframework.com/docs/v2/components/#navigation for more info on\r\n Ionic pages and navigation.\r\n */\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-place-detail',\r\n  templateUrl: 'place-detail.html'\r\n})\r\nexport class PlaceDetailPage {\r\n  public place:any;\r\n  public categorized: any []= []\r\n  public workingHour:any;\r\n  objectKeys = Object.keys;\r\n  open:any = -1\r\n  total_price = 0;\r\n  constructor( public nav: NavController, public placeService: PlaceService, params: NavParams, private http: Http) {\r\n    if(localStorage.getItem('total_price') != null)\r\n      this.total_price = parseInt(localStorage.getItem('total_price'))\r\n    this.place = placeService.getItem(1);\r\n    var detail = params.get('detail');\r\n    let headers = new Headers( { 'Content-Type': 'application/json' } )\r\n    let options = new RequestOptions( { withCredentials: true, headers: headers } )\r\n\r\n    http.post( 'http://localhost:3000/products', { \"restaurant_id\": detail.id }, options ).subscribe( res =>\r\n    {\r\n      this.categorized = res.json();\r\n      console.log( this.categorized )\r\n      \r\n    }, err => console.log( err ), () =>{\r\n      var items = []\r\n      items = JSON.parse(localStorage.getItem('cart'))\r\n      this.objectKeys(this.categorized).forEach(categories => {\r\n        var keys = this.objectKeys(this.categorized[categories]);\r\n        keys.forEach(key => {\r\n          var temp=items.find(x => {return x.id == key})\r\n          if(temp != null)\r\n             this.categorized[categories][key].item.forEach(food => {\r\n               if(food.variation_name==temp.variation_name)\r\n                  food.qty=temp.qty\r\n\r\n             });\r\n        })\r\n      });\r\n    })\r\n    console.log(detail);\r\n    console.log(this.place);\r\n    \r\n\r\n    this.place.name = detail.title;\r\n    this.place.menu = this.categorized;\r\n    // get working hours\r\n    this.workingHour = this.getWorkingHours(this.place.working_hours);\r\n  }\r\n  add_to_cart(item){\r\n  \r\n    item.qty = item.qty +1\r\n    var items = []\r\n    if(localStorage.getItem('cart') == null){\r\n      items.push(item)\r\n      localStorage.setItem('cart',JSON.stringify(items));\r\n    }\r\n    else{\r\n      items = JSON.parse(localStorage.getItem('cart'))\r\n      console.log(items.find(x => {return x.id === item.id}));\r\n      var i =items.find(x => {return x.id === item.id})\r\n      if(i == null)\r\n        items.push(item);\r\n      else\r\n        items.find(x => {return x.id === item.id}).qty = items.find(x => {return x.id === item.id}).qty +1; \r\n      \r\n      localStorage.setItem('cart',JSON.stringify(items));\r\n    }\r\n    if(localStorage.getItem('total_price')==null){\r\n      localStorage.setItem('total_price',item.variation_price + '')\r\n    }    \r\n    else{\r\n     var temp_price= parseInt(localStorage.getItem('total_price'))+item.variation_price\r\n     localStorage.setItem('total_price',temp_price+ '')\r\n    }\r\n    this.total_price = parseInt(localStorage.getItem('total_price'))    \r\n  }\r\n  toggleSection(i) {\r\n    this.categorized[i].open = !this.categorized[i].open;\r\n    if(this.categorized[i].open == false){\r\n      for (const key in this.categorized[i]) {\r\n          this.categorized[i][key];\r\n        if ( key != 'open')\r\n          this.categorized[i][key].open = false;\r\n      }\r\n    }\r\n  }\r\n \r\n  toggleItem(i) {\r\n    i.open = !i.open;\r\n  }\r\n\r\n  add ( item )\r\n  {\r\n    console.log( item );\r\n    item.qty = item.qty + 1;\r\n  }\r\n\r\n  customize(item,e : Event){\r\n    console.log('custom');\r\n    e.preventDefault();\r\n    e.stopPropagation()\r\n  }\r\n\r\n  // get working hours in today\r\n  getWorkingHours(hours) {\r\n    var d = new Date();\r\n    var currentDay = {\r\n      from: null,\r\n      to: null\r\n    };\r\n    var availableNow = false;\r\n\r\n    switch (d.getDay()) {\r\n      case 0:\r\n        currentDay = hours.sunday;\r\n        break;\r\n      case 1:\r\n        currentDay = hours.monday;\r\n        break;\r\n      case 2:\r\n        currentDay = hours.tuesday;\r\n        break;\r\n      case 3:\r\n        currentDay = hours.wednesday;\r\n        break;\r\n      case 4:\r\n        currentDay = hours.thursday;\r\n        break;\r\n      case 5:\r\n        currentDay = hours.friday;\r\n        break;\r\n      case 6:\r\n        currentDay = hours.saturday;\r\n        break;\r\n    }\r\n\r\n    availableNow = ((d.getHours() >= currentDay.from) && (d.getHours() <= currentDay.to));\r\n\r\n    return {\r\n      available: availableNow,\r\n      from: currentDay.from,\r\n      to: currentDay.to\r\n    }\r\n  }\r\n\r\n  // get limit elements for arr\r\n  limitArray(arr, limit) {\r\n    var tmpArr = [];\r\n\r\n    for (var i = 0; i < limit; i++) {\r\n      tmpArr.push(arr[i]);\r\n    }\r\n\r\n    return tmpArr;\r\n  }\r\n\r\n  // add bookmark\r\n  addBookMark(place) {\r\n    place.bookmarked = !place.bookmarked;\r\n  }\r\n\r\n  // go to map\r\n  goToMap() {\r\n    this.nav.push('MapPage');\r\n  }\r\n\r\n  // to to menu page\r\n  goToMenu() {\r\n    this.nav.push('MenuPage');\r\n  }\r\n\r\n  // go to photos\r\n  goToPhotos() {\r\n    this.nav.push('PhotosPage');\r\n  }\r\n\r\n  // go to reviews\r\n  goToReviews() {\r\n    this.nav.push('ReviewsPage');\r\n  }\r\n\r\n  viewcart(){\r\n    this.nav.push('CartviewPage');\r\n  }\r\n\r\n \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/place-detail/place-detail.ts"],"sourceRoot":""}